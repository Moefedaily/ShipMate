<div class="auth-page">
  <div class="auth-card">

    @if (!submitted()) {
      <h2>Forgot password</h2>
      <p class="auth-subtitle">
        Enter your email and we’ll send you a reset link
      </p>

      <!-- Global error -->
      @if (errorMessage()) {
        <div class="error-banner" role="alert">
          {{ errorMessage() }}
        </div>
      }

      <form [formGroup]="form" (ngSubmit)="submit()" novalidate>

        <!-- Email -->
        <div class="form-field">
          <label for="email">Email</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            autocomplete="email"
          />

          @if (isEmailInvalid()) {
            <small class="error">
              Please enter a valid email address.
            </small>
          }
        </div>

        <!-- Submit -->
        <button
          type="submit"
          class="btn btn--primary auth-submit"
          [disabled]="submitting()"
        >
          {{ submitting() ? 'Sending…' : 'Send reset link' }}
        </button>
      </form>

      <div class="auth-footer">
        Remember your password?
        <a routerLink="/login">Sign in</a>
      </div>
    }

    <!-- SUCCESS -->
    @if (submitted()) {
      <div class="auth-success">
        <div class="success-icon">✓</div>
        <h2>Check your email</h2>
        <p>
          If an account exists for this email, a password reset link has been sent.
          Please check your inbox and spam folder.
        </p>

        <button
          class="btn btn--secondary"
          (click)="resetForm()"
        >
          Try another email
        </button>

        <div class="auth-footer">
          <a routerLink="/login">Back to login</a>
        </div>
      </div>
    }

  </div>
</div>
